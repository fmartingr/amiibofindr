{% extends "_layout.html" %}
{% load i18n staticfiles %}

{% block page_title %}{% blocktrans with collection=selected_collection.name amiibo=amiibo.name %}{{ amiibo }} amiibo from {{ collection }} in {% endblocktrans %}{{ block.super }}{% endblock %}


{% block breadcrumb %}
{{ block.super }}
<i class="right chevron icon divider"></i>
<a class="section" href="{{ selected_collection.get_absolute_url }}">{{ selected_collection.name }}</a>
<i class="right chevron icon divider"></i>
<span class="active section">{{ amiibo.name }}</span>
{% endblock %}

{% block main_content %}
<div class="ui page grid">
  <div class="five wide column">
    <div class="ui card">
      <a class="image">
        <img src="{% static amiibo.image_statue %}" />
      </a>
      <div class="content">
        <!-- <i class="right floated like icon"></i> -->
        <!-- <i class="right floated star icon"></i> -->
        <div class="header">{{ amiibo.name }}</div>
        <div class="meta">
          <a href="{{ amiibo.collection.get_absolute_url }}">{{ amiibo.collection.name }}</a>
        </div>
        <!-- <div class="description">
          <p>asd</p>
        </div> -->
      </div>
      <!-- <div class="extra content">
        <span class="left floated like">
          <i class="like icon"></i>
          Like
        </span>
        <span class="right floated star">
          <i class="star icon"></i>
          Favorite
        </span>
      </div> -->
    </div>
  </div>
  <div class="eleven wide column">
    {% if amiibo.shops_set.exists %}
    <table class="ui celled table">
      <thead>
        <tr>
          <th>{% trans "Shop" %}</th>
          <th class="center aligned" width="10">{% trans "Country" %}</th>
          <th class="center aligned">{% trans "Stock" %}</th>
          <th class="center aligned">{% trans "Price" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for relation in amiibo.shops_set.all %}
        <tr>
          {% with price=relation.last_price.price %}
          <td><a href="{{ relation.get_url }}">{{ relation.shop.name }}</a> <i class="info icon" title="{{ relation.last_price.date }}"></i></td>
          <td class="center aligned">{% if relation.shop.flag_code %}<i class="{% if relation.shop.flag_code == 'uk' %}gb{% else %}{{ relation.shop.flag_code }}{% endif %} flag"></i>{% endif %}</td>
          <td class="center aligned {{ price|yesno:'positive,negative' }}">
            <i class="icon {{ price|yesno:'checkmark,close' }}"></i>
            {{ price|yesno|capfirst }}
          </td>
          <td class="center aligned">
            {% if price %}
              {{ price }} {{ relation.last_price.currency }}
            {% else %}
              --
            {% endif %}
          </td>
          {% endwith %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </div>
</div>
{% endblock %}
